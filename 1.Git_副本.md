## Git 基础概念

* **什么是 Git？**
	* **定义**：版本控制系统（Version Control System, VCS）
	- **核心目的**：解决文件版本管理混乱问题
	- **传统问题示例**：thesis.doc → thesis(2).doc → thesis_3_1_FINAL(2).doc（文件名越来越复杂）
- **Git 的核心优势**
	- 不需要创建多个文件副本
	- 用 **元数据** 记录每个版本（时间戳、修改说明）
	- 用 **差异(diffs)** 追踪具体改动，而非保存整个文件
	- 支持 **分支管理** 实现多条发展路线


## Git 的三层架构

* **三个关键区域**
	* ![[截屏2025-10-27 21.09.59.png]]
	* **各区域功能**：
		* **工作区**：你实际编辑文件的本地文件夹
		- **暂存区**：准备提交的文件缓冲区
		- **仓库区**：Git 正式保存的历史记录

* **文件状态流转**
	* ![[截屏2025-10-27 21.09.36.png]]


## Git 的核心操作流程

* **查看状态**

| 命令         | 功能             |
| ---------- | -------------- |
| git status | 查看哪些文件被修改（未暂存） |
| git diff   | 查看具体改动了哪些行     |
* **暂存文件**

| 命令            | 功能                     |
| ------------- | ---------------------- |
| git commit    | 提交暂存区的文件到仓库            |
| git commit -a | 直接提交所有修改文件（跳过 git add） |
	**提交时的重要信息**：
		* 时间戳（如 2020-04-21 11:23）
		* 提交消息（如"Mostly format"、"Writing intro"）

* **撤销操作**

| 命令                      | 功能                   |
| ----------------------- | -------------------- |
| git checkout <filename> | 放弃对该文件的修改，恢复到上一个提交版本 |


## 分支（Branches）管理

* **分支概念**
	* **定义**：文件历史的**不同发展路线**
	- **类比**：选择不同的实验方向，可以独立进行而不互相干扰
	- **默认分支**：`master`（主分支）

* **分支操作**

| 命令                            | 功能           |
| ----------------------------- | ------------ |
| git branch                    | 查看当前所在分支     |
| git checkout -b <branch_name> | 创建新分支并切换到该分支 |
| git checkout <branch_name>    | 切换到已有分支      |
* **分支工作流示例**![[截屏2025-10-27 21.16.33.png]]
	* **流程**：
		* 在 `master` 分支上工作
		- 创建 `Experiment` 分支进行实验（`git checkout -b Experiment`）
		- 在 `Experiment` 分支上独立修改文件
		- 需要时切换回 `master` 分支（`git checkout master`）


## 合并（Merge）分支

* **合并概念**
	* **定义**：将一个分支的修改**整合到另一个分支**
	- **场景**：实验成功后，将 `Experiment` 合并回 `master`
* **合并操作**

| 命令                      | 功能           |
| ----------------------- | ------------ |
| git merge <branch_name> | 将指定分支合并到当前分支 |
* **合并规则**
	* **自动合并的三种情况**：
		1. **只在一个分支修改**
		    - Master 修改了 A，Experiment 未修改 → 保留 Master 版本
		    - Experiment 修改了 Z，Master 未修改 → 保留 Experiment 版本
		2. **同一文件两个分支都修改但**修改**不同部分** → 自动合并成功
		3. **同一文件同一位置两个分支都修改** → 产生**冲突（conflict）**，需要手动解决
* **合并冲突处理**
	* 合并时会提示哪些文件有冲突
	- 需要手动编辑文件，选择保留哪个版本
	- 解决后再提交


## 远程仓库操作

* **协作工作流**

| 命令                   | 功能               |
| -------------------- | ---------------- |
| git clone <repo_url> | 从远程仓库克隆一份副本到本地   |
| git fetch            | 从远程获取更新，**不合并**  |
| git pull             | 从远程获取更新，**自动合并** |
| git push             | 将本地提交推送到远程仓库     |
* **工作流程**![[截屏2025-10-27 21.20.45.png]]


## 仓库初始化

| 命令              | 功能                  |
| --------------- | ------------------- |
| git init        | 在当前目录创建一个新的空 Git 仓库 |
| git clone <url> | 克隆一个已有的远程仓库         |

## 特殊文件：.gitignore

* **用途**
	* 告诉 Git 忽略某些文件或文件类型
	- 这些文件不会被版本控制追踪
- **常见用法**![[截屏2025-10-27 21.22.23.png]]


## HEAD 指针

* **概念**
	* **HEAD**：指向当前所在的分支位置的指针
	- 切换分支时，HEAD 也随之移动
	- `git checkout <branch>` 实际上是移动 HEAD
* **示意**
	* 当在 Master：HEAD → Master 的最新提交
	* 当在 Experiment：HEAD → Experiment 的最新提交


## 命令速查表

#### 初始化和克隆

| git init        | 初始化新仓库 |
| --------------- | ------ |
| git clone <url> | 克隆远程仓库 |
#### 日常操作

| git status              | 查看文件状态 |
| ----------------------- | ------ |
| git add <file>          | 暂存文件   |
| git commit -m "message" | 提交修改   |
| git diff                | 查看具体改动 |
#### 分支操作

| git branch               | 列出所有分支 |
| ------------------------ | ------ |
| git checkout -b <branch> | 创建新分支  |
| git checkout <branch>    | 切换分支   |
| git merge <branch>       | 合并分支   |
#### 远程操作

| git fetch | 从远程获取（不合并） |
| --------- | ---------- |
| git pull  | 从远程获取并合并   |
| git push  | 推送到远程      |
